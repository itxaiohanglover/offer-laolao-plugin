# Offer捞捞 - 调试指南

## 在 Cursor 内置浏览器中调试

### 方法一：使用 Chrome 加载扩展

1. **打开 Chrome 扩展管理页面**
   - 在 Chrome 地址栏输入: `chrome://extensions/`
   - 或者点击菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**
   - 在扩展管理页面右上角，打开「开发者模式」开关

3. **加载已解压的扩展程序**
   - 点击「加载已解压的扩展程序」按钮
   - 选择项目根目录: `/Users/huxiaochuan/IdeaProjects/super_resume`
   - 扩展加载成功后会显示在列表中

4. **打开测试页面**
   - 在浏览器中打开测试页面: `file:///Users/huxiaochuan/IdeaProjects/super_resume/test/mock-job-site.html`
   - 或者使用本地服务器运行

### 方法二：使用本地服务器（推荐）

1. **启动本地服务器**
   ```bash
   cd /Users/huxiaochuan/IdeaProjects/super_resume
   # 使用 Python
   python3 -m http.server 8080
   # 或者使用 Node.js
   npx serve .
   ```

2. **访问测试页面**
   - 打开浏览器访问: `http://localhost:8080/test/mock-job-site.html`

---

## 滚动预填功能使用说明

### 功能介绍

滚动预填功能会在用户滚动页面时，自动检测当前可见区域内的表单元素，并使用 AI 进行智能匹配。

### 使用步骤

1. **填写简历信息**
   - 点击浏览器工具栏的 Offer捞捞 图标
   - 在弹出的面板中填写您的简历信息

2. **启动滚动预填**
   - 在简历填写页面，点击「🎯 滚动预填」按钮
   - 此时会在目标页面右下角显示预填控制面板

3. **滚动页面检测**
   - 滚动网页，插件会自动检测当前可见区域内的表单字段
   - AI 会自动匹配您的简历数据与页面字段

4. **填充字段**
   - 在预填面板中，您可以：
     - 点击单个字段的「填充」按钮，逐个填充
     - 点击「一键填充全部」，填充所有匹配的字段
     - 点击某一行，自动定位到对应的表单字段

5. **停止预填**
   - 点击「关闭预填」按钮，或点击插件中的「停止预填」按钮

---

## 调试技巧

### 查看 Content Script 日志

1. 在目标网页按 `F12` 打开开发者工具
2. 切换到 `Console` 标签
3. 可以看到 `简历自动填写助手` 相关的日志

### 查看 Popup 日志

1. 右键点击扩展图标
2. 选择「检查弹出内容」
3. 在打开的开发者工具中查看日志

### 查看 Background Service Worker 日志

1. 在 `chrome://extensions/` 页面
2. 找到 Offer捞捞 扩展
3. 点击「Service Worker」链接查看日志

---

## 测试页面说明

`test/mock-job-site.html` 是一个模拟招聘网站的表单页面，包含：

- **基本信息**: 姓名、性别、手机、邮箱、出生日期、身份证、城市、政治面貌
- **求职意向**: 期望职位、期望行业、期望薪资、期望工作地点
- **教育经历**: 学校、专业、学历、在校时间
- **工作/实习经历**: 公司、职位、在职时间、工作描述
- **项目经历**: 项目名称、角色、项目描述、主要职责
- **技能特长**: 专业技能
- **自我评价**: 个人简介

测试页面右下角有调试面板，会实时显示：
- 页面事件日志
- 滚动位置信息
- 与插件的通信状态

---

## 常见问题

### Q: 滚动预填没有反应？

A: 请检查：
1. 是否已在插件中填写了简历信息
2. 是否点击了「滚动预填」按钮
3. 页面是否有可识别的表单字段
4. 查看控制台是否有错误信息

### Q: AI 匹配不准确？

A: 
1. 确保已在设置中配置了 AI 模型 API Key
2. 检查简历字段的填写是否完整
3. AI 匹配会降级到本地匹配（基于关键词）

### Q: 字段填充失败？

A: 某些网站使用特殊的前端框架（如 React、Vue），可能需要特殊处理。插件已针对常见招聘网站进行了适配。

---

## 项目结构

```
super_resume/
├── manifest.json          # 扩展清单文件
├── src/
│   ├── background/
│   │   └── background.js  # 后台 Service Worker
│   ├── content/
│   │   └── content.js     # 内容脚本（含滚动预填功能）
│   └── popup/
│       ├── popup.html     # 弹出页面
│       ├── popup.js       # 主入口
│       ├── handlers/
│       │   └── action-buttons.js  # 操作按钮处理
│       └── ...
├── test/
│   ├── mock-job-site.html # 模拟招聘网站测试页面
│   └── DEBUG_GUIDE.md     # 本调试指南
└── ...
```

